# Telegram Authentication with Django

Это проект, который демонстрирует использование Telegram для авторизации пользователей на сайте. Пользователи могут войти через Telegram, и их аккаунт будет связан с их Telegram-аккаунтом. Проект использует Django для реализации серверной части и взаимодействует с Telegram через webhook.

## Основные принципы работы

### 1. Авторизация через Telegram

Когда пользователь нажимает на кнопку "Войти через Telegram" на веб-странице, он перенаправляется в Telegram-бота с уникальной командой `/start`, которая включает токен авторизации. После этого, когда пользователь отправляет команду в Telegram-боте, сервер получает webhook с данными, включая токен, и выполняет связывание пользователя с его Telegram-аккаунтом.

### 2. Процесс авторизации

1. **Генерация токена**: На странице сайта генерируется уникальный токен, который прикрепляется к ссылке для перехода в Telegram-бота.
   
2. **Отправка команды `/start`**: Когда пользователь кликает на кнопку "Войти через Telegram", он перенаправляется в Telegram-бота, где автоматически отправляется команда `/start <token>`. Этот токен будет использоваться для связывания пользователя на сервере.
   
3. **Получение webhook от Telegram**: После отправки команды `/start` Telegram-бот отправляет webhook на сервер. Сервер извлекает токен и данные о пользователе (ID и имя пользователя) из запроса.

4. **Создание пользователя**: Если пользователь не существует, создается новый пользователь с использованием данных из Telegram (ID и username).

5. **Авторизация пользователя**: После успешного связывания аккаунта в Telegram и создания пользователя, он автоматически авторизуется на сайте.

6. **Перенаправление**: После успешной авторизации, пользователь перенаправляется на главную страницу сайта.

### 3. Структура проекта

Проект состоит из нескольких частей:

- **Webhook**: Основная часть проекта, которая обрабатывает входящие запросы от Telegram. Вебхук извлекает данные о пользователе и токене, связывает их с аккаунтом и отправляет ответ пользователю через Telegram.
  
- **Система авторизации**: Используется стандартная система авторизации Django, которая интегрируется с Telegram для регистрации и авторизации пользователя.

- **Взаимодействие с Telegram**: Для отправки сообщений пользователю используется Telegram API с помощью HTTP-запросов (библиотека `requests`).

### 4. Настройка

#### Установка зависимостей

Для установки зависимостей проекта, выполните команду:

```bash
pip install -r requirements.txt
